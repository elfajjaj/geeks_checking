{% extends "base.html" %}
{% block content %}
<h2 class="text-2xl font-bold text-indigo-700 mb-6">ðŸ“Š Dashboard</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <div class="bg-white p-4 rounded-lg shadow">
    <canvas id="perOrg"></canvas>
  </div>
  <div class="bg-white p-4 rounded-lg shadow">
    <canvas id="popular"></canvas>
  </div>
</div>
<div class="mt-6 bg-white p-4 rounded-lg shadow">
  <canvas id="daily"></canvas>
</div>
<script>
new Chart(document.getElementById('perOrg'), {
  type: 'bar',
  data: { labels: {{ org_labels|tojson|safe }},
          datasets: [{ label: 'Events per Org', backgroundColor: '#6366f1', data: {{ org_counts|tojson|safe }} }] }
});
new Chart(document.getElementById('popular'), {
  type: 'bar',
  data: { labels: {{ pop_labels|tojson|safe }},
          datasets: [{ label: 'Most Popular', backgroundColor: '#f59e0b', data: {{ pop_counts|tojson|safe }} }] }
});
new Chart(document.getElementById('daily'), {
  type: 'line',
  data: { labels: {{ daily_labels|tojson|safe }},
          datasets: [{ label: 'Tickets/day', borderColor: '#10b981', fill: false, data: {{ daily_counts|tojson|safe }} }] }
});
</script>
{% endblock %}
